<!DOCTYPE html>

<html lang="=pt-br"
	  xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">


<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<title>House Market - Bem-Vindo!</title>
	<script type="text/javascript" th:src="@{/js/jquery-3.2.0.min.js}"></script>
	<script type="text/javascript" th:src="@{/js/jquery.autocomplete.js}"></script>

	<!-- Compiled and minified JavaScript -->
	<script type="text/javascript" th:src="@{/js/materialize.min.js}"></script>

	<link rel="stylesheet" type="text/css" href="/css/autocomplete.css">
	
	<!--Import materialize.css-->
	<!-- <link type="text/css" rel="stylesheet" th:href="@{/css/materialize.min.css}" media="screen,projection"/> --> 
	<!--Import Google Icon Font-->
	<link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

	<script>
        $(document).ready(function() {
            $('#autocomplete-input').devbridgeAutocomplete({
                serviceUrl: '/suggestion',
                paramName: 'searchTerm',
                minChars: 1,
                autoSelectFirst: true
            });

        });
	</script>

</head>

<body>

	<div class="p-3 mb-2 bg-primary text-white">
		
		<div class="container-fluid">
			
			<ul class="nav nav-pills nav-fill">
				<li class="nav-item"><img src="..\images\housemarket.png" width="160px" height="60px" alt="House Market"></li>
				
				<li class="nav-item"><h1>House Market</h1></li>
				
				<li class="nav-item">
					<a href="index" class="btn btn-primary btn-lg active" role="button" aria-pressed="true">Página Inicial</a>
				</li>
				
				<li class="nav-item">
					<a href="cadastro-anuncio" class="btn btn-primary btn-lg active" role="button" aria-pressed="true">Anunciar</a>
				</li>
				
				<li class="nav-item" sec:authorize="isAuthenticated()">
					<a class="btn btn-primary btn-lg active" role="button" aria-pressed="true" th:href="@{/dashboard}">Minha Conta</a>
				</li>
				
				<li class="nav-item" sec:authorize="isAuthenticated()">
					<a class="btn btn-primary btn-lg active" role="button" aria-pressed="true" th:href="@{/}">Logout</a>				
				</li>
				
				<li class="nav-item" sec:authorize="isAnonymous()">
					<a class="btn btn-primary btn-lg active" role="button" aria-pressed="true" th:href="@{/cadastro-anunciante}">Cadastre-se</a>
				</li>
				
				<li class="nav-item" sec:authorize="isAnonymous()">
					<a class="btn btn-primary btn-lg active" role="button" aria-pressed="true" th:href="@{/login}">Login</a>
				</li>
			
			</ul>
		</div>

	</div>
	
	<div class="container">
		
		<h1>Bem-vindo</h1>
		<h6>Temos o anúncio ideal para você!</h6>
		
		<hr>
		
			<form class="form-inline" th:action="@{/pesquisar}" method="GET">	
				<div class="autocomplete">
					<fieldset>
						<div class="form-group row">
							<div class="col">
								<h2>Encontre seu imóvel</h2>
								<p>Digite a rua, bairro ou a cidade</p>
							</div>
						</div>
						<input type="text" id="autocomplete-input" class="form-control input-sm">
			
			            <button type="submit" class="btn btn-primary">Buscar</button>
					
					</fieldset>
				</div>
			</form>
	
		<hr>	
	
		<table class="container">
			<thead>
				<tr>
					<th><h2>Últimos anúncios</h2></th>
				</tr>
			</thead>	
			
			<tbody>
				<tr th:each="anuncio : ${page.content}">
					
					<td th:text="${anuncio.titulo}"></td>
					<td th:text="${anuncio.preco}"></td>
					<td th:text="${anuncio.tipo}"></td>
					
					<td>
						<div class="btn-group btn-group-sm pull-right">
							
					   		<a class="btn btn-outline-secondary" th:href="@{/detalhesAnuncio/{id}(id=${anuncio.id})}">Detalhes</a>
					   		<a sec:authorize="isAuthenticated()" class="btn btn-outline-primary" th:href="@{/edit/{id}(id=${anuncio.id})}">Editar</a>
					   		<a sec:authorize="isAuthenticated()" class="delete btn btn-outline-danger" th:href="@{/delete-anuncio/{id}(id=${anuncio.id})}">Excluir</a>
					   		
					   </div>
					</td>
				</tr>	
			</tbody>
			
		</table>

		<nav aria-label="Navegação de página">
			<ul class="pagination justify-content-center">
				<div class="pagination justify-content-center">
		    		<span th:if="${page.hasPrevious()}">
		        		<li class="page-item">
		        			<a class="page-link" th:href="@{/index(page=${page.number-1},size=${page.size})}">Anterior</a>
		        		</li>
		    		</span>
					
					<th:block th:each="i: ${#numbers.sequence(0, page.totalPages - 1)}">
						<span th:if="${page.number == i}" class="page-link">[[${i}+1]]</span>
						<span th:unless="${page.number == i}">
		             		<li class="page-item">
		             			<a class="page-link" th:href="@{/index(page=${i},size=${page.size})}">[[${i}+1]]</a>
		             		</li>
						</span>
					</th:block>
					
					<span th:if="${page.hasNext()}">
		        		<li class="page-item">
		        			<a class="page-link" th:href="@{/index(page=${page.number+1},size=${page.size})}">Próximo</a>
		        		</li>
		    		</span>
				</div>
			</ul>
		</nav>
		
	</div>

	<div class="p-3 mb-2 bg-primary text-white">
		<div class="container-fluid">
			<h5>House Market- Anuncie seu imóvel aqui</h5>
			<p>&copy; 2018 Copyright - Todos os direitos reservados</p>
		</div>
	</div>

		
	<!--<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>	
</body>

</html>